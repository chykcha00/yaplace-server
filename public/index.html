<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üé® Yaplace Game</title>
    <link rel="stylesheet" href="style.css">

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º SDK –Ø–Ω–¥–µ–∫—Å.–ò–≥—Ä –õ–û–ö–ê–õ–¨–ù–û -->
    <!-- SDK.js –¥–æ–ª–∂–µ–Ω –ª–µ–∂–∞—Ç—å —Ä—è–¥–æ–º —Å index.html -->
    <script src="/sdk.js"></script>

    <script>
        // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK ===
        let ysdk = null;

        document.addEventListener("DOMContentLoaded", () => {
            if (typeof YaGames === "undefined") {
                console.error("‚ùå SDK –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª sdk.js –ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å index.html");
                return;
            }

            YaGames.init()
                .then(sdk => {
                    ysdk = sdk;
                    console.log("‚úÖ Yandex SDK –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");

                    // –ü—Ä–æ–≤–µ—Ä–∏–º –Ω–∞–ª–∏—á–∏–µ —Ä–µ–∫–ª–∞–º—ã
                    if (ysdk.adv) {
                        console.log("üé¨ –ú–æ–¥—É–ª—å —Ä–µ–∫–ª–∞–º—ã –≥–æ—Ç–æ–≤");
                    } else {
                        console.warn("‚ö†Ô∏è –ú–æ–¥—É–ª—å —Ä–µ–∫–ª–∞–º—ã –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");
                    }

                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ä–µ–∫–ª–∞–º—ã
                    const adButton = document.getElementById("watch-ad");
                    if (adButton) {
                        adButton.addEventListener("click", () => {
                            ysdk.adv.showRewardedVideo({
                                callbacks: {
                                    onOpen: () => console.log("‚ñ∂Ô∏è –†–µ–∫–ª–∞–º–∞ –∑–∞–ø—É—â–µ–Ω–∞"),
                                    onRewarded: () => {
                                        console.log("üéÅ –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏–ª –Ω–∞–≥—Ä–∞–¥—É");
                                        const pixels = document.getElementById("pixels");
                                        pixels.textContent = parseInt(pixels.textContent) + 5;
                                    },
                                    onClose: () => console.log("‚èπ –†–µ–∫–ª–∞–º–∞ –∑–∞–∫—Ä—ã—Ç–∞"),
                                    onError: (err) => console.warn("‚ö†Ô∏è –û—à–∏–±–∫–∞ —Ä–µ–∫–ª–∞–º—ã:", err)
                                }
                            });
                        });
                    }
                })
                .catch(err => {
                    console.warn("‚ö†Ô∏è –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Yandex SDK:", err);
                });
        });
    </script>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu">
        <div class="menu-box">
            <h1>üé® Yaplace</h1>
            <p>–û–Ω–ª–∞–π–Ω –ø–æ–ª–æ—Ç–Ω–æ, –≥–¥–µ –∫–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç —Å—Ç–∞–≤–∏—Ç—å –ø–∏–∫—Å–µ–ª–∏</p>
            <input type="text" id="player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
            <button id="start-game">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div id="header">
        <h1>Yaplace</h1>
        <div id="pixel-counter">
            –ü–∏–∫—Å–µ–ª–∏: <span id="pixels">100</span>
            <button id="collect-pixels">+10</button>
            <button id="watch-ad">üéÅ +5 –∑–∞ —Ä–µ–∫–ª–∞–º—É</button>
            <span id="collect-timer"></span>
        </div>
        <button id="open-gallery">üêâ –†–∏—Å—É–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏</button>
    </div>

    <div id="container">
        <canvas id="board"></canvas>

        <!-- Sidebar —Å —á–∞—Ç–æ–º -->
        <div id="sidebar">
            <h2>–ß–∞—Ç</h2>
            <div id="chat-container">
                <div id="chat-global" class="chat-box"></div>
                <div id="chat-controls">
                    <input type="text" id="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                    <button id="send-chat">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
        <div id="palette"></div>
        <button id="reset-view">–°–±—Ä–æ—Å –≤–∏–¥–∞</button>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –≥–∞–ª–µ—Ä–µ–∏ -->
    <div id="gallery-modal" class="hidden">
        <div class="gallery-content">
            <button id="close-gallery">‚ùå</button>
            <h2>üñº –†–∏—Å—É–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏</h2>
            <div id="gallery"></div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –∏–≥—Ä—ã -->
    <script src="main.js" defer></script>
</body>
</html>
