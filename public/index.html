<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://yastatic.net/games-sdk/v2/sdk.min.js"></script>
    <meta charset="UTF-8">
    <title>Yaplace Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu">
        <div class="menu-box">
            <h1>üé® Yaplace</h1>
            <p>–û–Ω–ª–∞–π–Ω –ø–æ–ª–æ—Ç–Ω–æ, –≥–¥–µ –∫–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç —Å—Ç–∞–≤–∏—Ç—å –ø–∏–∫—Å–µ–ª–∏</p>
            <input type="text" id="player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
            <button id="start-game">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div id="header">
        <h1>Yaplace</h1>
        <div id="pixel-counter">
            –ü–∏–∫—Å–µ–ª–∏: <span id="pixels">100</span>
            <button id="collect-pixels">+10</button>
            <button id="watch-ad">üéÅ +5 –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã</button> <!-- –∫–Ω–æ–ø–∫–∞ —Ä–µ–∫–ª–∞–º—ã -->
            <span id="collect-timer"></span>
        </div>
        <button id="open-gallery">üñº –†–∏—Å—É–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏</button>
    </div>

    <div id="container">
        <canvas id="board"></canvas>

        <!-- Sidebar —Å —á–∞—Ç–æ–º -->
        <div id="sidebar">
            <h2>–ß–∞—Ç</h2>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞ -->
            <div id="chat-container">
                <div id="chat-global" class="chat-box"></div>

                <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
                <div id="chat-controls">
                    <input type="text" id="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                    <button id="send-chat">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
        <div id="palette"></div>
        <button id="reset-view">–°–±—Ä–æ—Å –≤–∏–¥–∞</button>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –≥–∞–ª–µ—Ä–µ–∏ -->
    <div id="gallery-modal" class="hidden">
        <div class="gallery-content">
            <button id="close-gallery">‚ùå</button>
            <h2>üñº –†–∏—Å—É–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏</h2>
            <div id="gallery"></div>
        </div>
    </div>

    <script src="main.js" defer></script>

    <script>
        // === –ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Ä–µ–∫–ª–∞–º—ã ===
        const adButton = document.getElementById('watch-ad');
        const pixelCounter = document.getElementById('pixels');
        let pixelCount = parseInt(pixelCounter.textContent);

        adButton.addEventListener('click', () => {
            if (typeof ysdk === 'undefined' || !ysdk.adv) {
                alert("–†–µ–∫–ª–∞–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞");
                return;
            }

            ysdk.adv.showRewardedVideo({
                callbacks: {
                    onOpen: () => console.log('–í–∏–¥–µ–æ –æ—Ç–∫—Ä—ã—Ç–æ'),
                    onRewarded: () => {
                        pixelCount += 5;
                        pixelCounter.textContent = pixelCount;
                        alert("–í—ã –ø–æ–ª—É—á–∏–ª–∏ +5 –ø–∏–∫—Å–µ–ª–µ–π!");
                    },
                    onClose: () => console.log('–í–∏–¥–µ–æ –∑–∞–∫—Ä—ã—Ç–æ'),
                    onError: (e) => {
                        console.log('–û—à–∏–±–∫–∞ —Ä–µ–∫–ª–∞–º—ã:', e);
                        alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
                    }
                }
            });
        });
    </script>
</body>
</html>
